!function(e){"use strict";e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),e.browser.mobile=/mobile|android|iphone|ipad|phone|ipod|blackberry|iemobile|kindle|silk|opera mini/.test(navigator.userAgent.toLowerCase()));var t={destroy:function(){return e(this).unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},applyMask:function(t){return a(t,e(this).data("settings"))},mask:function(t){return this.each((function(){var n=e(this);return"number"==typeof t&&n.val(t),n.trigger("mask")}))},unmasked:function(){return this.map((function(){var t=e(this).data("settings"),n=e(this).val()||"0",a=-1!==n.indexOf("-"),r="",i=n.split(t.decimal);return i[1]&&(r=i[1]),(i=i[0].split(/\D/)).length>1&&(n="",e(i).each((function(e,t){t&&(n+=t)}))),n=(n=n.replace(/\D/g,""))+"."+r,a&&(n="-"+n),parseFloat(n)}))},init:function(t){return t=e.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1},t),this.each((function(){var r,i,o=e(this);function l(){var e,t,n,a,r,i=o.get(0),l=0,s=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(l=i.selectionStart,s=i.selectionEnd):(t=document.selection.createRange())&&t.parentElement()===i&&(a=i.value.length,e=i.value.replace(/\r\n/g,"\n"),(n=i.createTextRange()).moveToBookmark(t.getBookmark()),(r=i.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?l=s=a:(l=-n.moveStart("character",-a),l+=e.slice(0,l).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?s=a:(s=-n.moveEnd("character",-a),s+=e.slice(0,s).split("\n").length-1))),{start:l,end:s}}function s(e){var t,n,i=o.val().length;o.val(a(o.val(),r)),t=o.val().length,r.reverse||(e-=i-t),n=e,r.formatOnBlur||o.each((function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(n,n);else if(t.createTextRange){var a=t.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",n),a.select()}}))}function c(){var e=o.val();!r.allowEmpty||""!==e&&!isNaN(parseFloat(e))?(r.precision>0&&e.indexOf(r.decimal)<0&&(e+=r.decimal+new Array(r.precision+1).join(0)),o.val(a(e,r))):o.val("")}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function d(t){var n,a,i,s,c,d,f=(t=t||window.event).which||t.charCode||t.keyCode,p=r.decimal.charCodeAt(0);return void 0!==f&&(!(f<48||f>57)||f===p&&r.reverse?(n=!(o.val().length>=o.attr("maxlength")&&o.attr("maxlength")>=0),a=l(),i=a.start,s=a.end,c=!(a.start===a.end||!o.val().substring(i,s).match(/\d/)),d="0"===o.val().substring(0,1),!!(n||c||d)&&((f!==p||!function(){if(function(){var e=o.val().length,t=l();return 0===t.start&&t.end===e}())return!1;return o.val().indexOf(r.decimal)>-1}())&&(!!r.formatOnBlur||(u(t),v(t),!1)))):function(t,n){return 45===t?(o.val((a=o.val(),r.allowNegative?""!==a&&"-"===a.charAt(0)?a.replace("-",""):"-"+a:a)),!1):43===t?(o.val(o.val().replace("-","")),!1):13===t||9===t||(!(!e.browser.mozilla||37!==t&&39!==t||0!==n.charCode)||(u(n),!0));var a}(f,t))}function v(e){var t,n,a,r,i=(e=e||window.event).which||e.charCode||e.keyCode,c="";i>=48&&i<=57&&(c=String.fromCharCode(i)),n=(t=l()).start,a=t.end,r=o.val(),o.val(r.substring(0,n)+c+r.substring(a,r.length)),s(n+1)}function f(){setTimeout((function(){c()}),0)}function p(){return(parseFloat("0")/Math.pow(10,r.precision)).toFixed(r.precision).replace(new RegExp("\\.","g"),r.decimal)}r=e.extend({},t),r=e.extend(r,o.data()),o.data("settings",r),o.unbind(".maskMoney"),e.browser.mobile&&o.bind("input.maskMoney",(function(e){c()})),o.bind("keypress.maskMoney",d),o.bind("keydown.maskMoney",(function(e){var t,n,a,i,c,d=(e=e||window.event).which||e.charCode||e.keyCode;return void 0!==d&&(n=(t=l()).start,a=t.end,8!==d&&46!==d&&63272!==d||(u(e),i=o.val(),n===a&&(8===d?""===r.suffix?n-=1:(c=i.split("").reverse().join("").search(/\d/),a=(n=i.length-c-1)+1):a+=1),o.val(i.substring(0,n)+i.substring(a,i.length)),s(n),!1))})),o.bind("blur.maskMoney",(function(t){if(e.browser.msie&&d(t),r.formatOnBlur&&o.val()!==i&&v(t),""===o.val()&&r.allowEmpty)o.val("");else if(""===o.val()||o.val()===n(p(),r))r.allowZero?r.affixesStay?o.val(n(p(),r)):o.val(p()):o.val("");else if(!r.affixesStay){var a=o.val().replace(r.prefix,"").replace(r.suffix,"");o.val(a)}o.val()!==i&&o.change()})),o.bind("focus.maskMoney",(function(){i=o.val(),c();var e,t=o.get(0);r.selectAllOnFocus?t.select():t.createTextRange&&((e=t.createTextRange()).collapse(!1),e.select())})),o.bind("click.maskMoney",(function(){var e,t=o.get(0);r.selectAllOnFocus||(t.setSelectionRange?(e=o.val().length,t.setSelectionRange(e,e)):o.val(o.val()))})),o.bind("dblclick.maskMoney",(function(){var e,t,n=o.get(0);n.setSelectionRange?(t=o.val().length,e=r.doubleClickSelection?0:t,n.setSelectionRange(e,t)):o.val(o.val())})),o.bind("cut.maskMoney",f),o.bind("paste.maskMoney",f),o.bind("mask.maskMoney",c)}))}};function n(e,t){var n="";return e.indexOf("-")>-1&&(e=e.replace("-",""),n="-"),e.indexOf(t.prefix)>-1&&(e=e.replace(t.prefix,"")),e.indexOf(t.suffix)>-1&&(e=e.replace(t.suffix,"")),n+t.prefix+e+t.suffix}function a(e,t){return t.allowEmpty&&""===e?"":t.reverse?function(e,t){var a,i=e.indexOf("-")>-1&&t.allowNegative?"-":"",o=e.replace(t.prefix,"").replace(t.suffix,""),l=o.split(t.decimal)[0],s="";""===l&&(l="0");if(a=r(l,i,t),t.precision>0){var c=o.split(t.decimal);c.length>1&&(s=c[1]),a+=t.decimal+s;var u=Number.parseFloat(l+"."+s).toFixed(t.precision).toString().split(t.decimal)[1];a=a.split(t.decimal)[0]+"."+u}return n(a,t)}(e,t):function(e,t){var a=parseFloat(e);isNaN(a)||(e=a.toFixed(t.precision)+"");var i,o,l,s=e.indexOf("-")>-1&&t.allowNegative?"-":"",c=e.replace(/[^0-9]/g,""),u=c.slice(0,c.length-t.precision);i=r(u,s,t),t.precision>0&&(o=c.slice(c.length-t.precision),l=new Array(t.precision+1-o.length).join(0),i+=t.decimal+l+o);return n(i,t)}(e,t)}function r(e,t,n){return""===(e=(e=e.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands))&&(e="0"),t+e}e.fn.maskMoney=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.maskMoney"):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto);